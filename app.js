angular.module("templates",[]);var app=angular.module("app",["ui.router","ngNotify","pascalprecht.translate","templates"]);app.run(["$rootScope","ngNotify",function(t,n){t.$on("$stateChangeError",function(t,n,e,o,r,a){console.error(a)}),n.config({theme:"pure",position:"bottom",duration:3e3,type:"warn",sticky:!1,button:!0,html:!1})}]),app.config(["$translateProvider",function(t){t.useLoader("translateGoogleSheetsLoader",{}),t.preferredLanguage("en"),t.useSanitizeValueStrategy()}]),app.config(["$stateProvider","$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider",function(t,n,e,o){e.html5Mode(!0),n.rule(function(t,n){n=n.url();if(!("/"===n[n.length-1]||-1<n.indexOf("/?")))return-1<n.indexOf("?")?n.replace("?","/?"):n+"/"}),t.state("app",{abstract:!0,url:"/{lang}/",template:"<sh-app/>",controller:["$translate","$state","$rootScope",function(t,n,e){t.use(n.params.lang),/he|ar/.test(n.params.lang)&&(e.dir="rtl")}]}).state("app.home",{url:"",template:"<sh-main/>"}).state("app.article",{url:"article/{number}/",template:"<sh-articles/>"}),n.otherwise("/en/")}]),app.directive("img",["$parse",function(t){return{restrict:"E",link:function(r,a,l){var i=l.ngError&&t(l.ngError);a.on("error",function(t){var n,e,o=this.src;i&&r.$apply(function(){i(r,{$event:t,$src:o})}),l.ngErrorSrc&&(n=l.ngErrorSrc,e=o.length-n.length,-1===o.indexOf(n,e))&&a.attr("src",l.ngErrorSrc)})}}}]),app.factory("Configuration",["$http","$q","$timeout",function(t,e,n){var o={q:"config.json",data:null};function r(){return t.get(o.q).then(function(t){o.data=t.data})}return{load:r,get:function(n){return e.when(o.data||r()).then(function(t){return o.data[n]})}}}]),angular.module("app").service("googleSheetsService",["$http",function(t){var n,a=this;a.setUrl=function(t){t&&(n="https://sheets.googleapis.com/v4/spreadsheets/"+t+"/values/Sheet1?alt=json&key=AIzaSyDVh0t10vWXoctuhUO00oixlwGXATPNZEM")},a.refresh=function(){a.hasData=!1,a.translations={en:{},he:{},sp:{}},t.get(n).then(function(t){t&&t.data&&t.data.feed&&t.data.feed.entry.length&&(function(t){for(var n in t){var e=t[n].gsx$key.$t,o=t[n].gsx$en.$t,r=t[n].gsx$he.$t,n=t[n].gsx$sp.$t;e&&o&&(a.translations.en[e]=o),e&&r&&(a.translations.he[e]=r),e&&n&&(a.translations.sp[e]=n)}}(t.data.feed.entry),a.hasData=!0)})},a.setUrl("1e29CirEQoQ4nfEHAkKfePMqK4s36TVCS-gPH4psidtw"),a.refresh()}]),angular.module("app").factory("translateGoogleSheetsLoader",["$http","$q",function(t,o){var r,n;return(n="1e29CirEQoQ4nfEHAkKfePMqK4s36TVCS-gPH4psidtw")&&(r="https://sheets.googleapis.com/v4/spreadsheets/"+n+"/values/Sheet1?alt=json&key=AIzaSyDVh0t10vWXoctuhUO00oixlwGXATPNZEM"),function(n){var e=o.defer();return t.get(r).then(function(t){t&&t.data&&t.data.values&&e.resolve(function(t,n){t&&n||console.error("Problem loading translations");var e=t[0].findIndex(function(t){return t===key});e||console.error("Problem identifying language",key);var o,r,a,l={};for(o in t)t[o]&&(r=t[o][0],a=t[o][e],r&&a&&(l[r]=a));return l}(t.data.values,n.key))}),e.promise}}]),app.component("shAbout",{bindings:{},templateUrl:"about/about.html",controller:function(){}}),app.component("shArticle",{bindings:{},templateUrl:"article/article.html",controller:["$stateParams","$scope","$filter",function(t,n,e){n.n=t.number;var o="image-"+n.n;n.$watch(function(){return e("translate")(o)},function(t){this.showImage=o!==t})}]}),app.component("shFooter",{bindings:{},templateUrl:"footer/footer.html",controller:function(){}}),app.component("shHeader",{bindings:{},templateUrl:"header/header.html",controller:["Configuration","$timeout",function(t,n){var e=this;t.get("imageHeader").then(function(t){e.length=[].constructor(t),n(function(){$(".flexslider").flexslider()},0)})}]}),app.component("shLaws",{bindings:{},templateUrl:"laws/laws.html",controller:function(){}}),app.component("shNavbar",{bindings:{},templateUrl:"navbar/navbar.html",controller:["$translate","$state","Configuration",function(n,e,t){var o=this;o.lang=e.params.lang,o.scrollTo=function(t){$("html,body").animate({scrollTop:$(t).offset().top})},o.goTo=function(t){n("sub-nav-id-"+t).then(function(t){e.go("app.article",{number:t})})},o.changeLanguage=function(t){n.use(t),o.lang=t,e.go(".",{lang:t})},t.get("subNav").then(function(t){o.length=[].constructor(t)})}]}),app.component("shPartners",{bindings:{},templateUrl:"partners/partners.html",controller:["Configuration",function(t){var n=this;t.get("partners").then(function(t){n.length=[].constructor(t)})}]}),app.component("shRebbe",{bindings:{},templateUrl:"rebbe/rebbe.html",controller:function(){}}),app.component("shSubHeader",{bindings:{},templateUrl:"subHeader/subHeader.html",controller:function(){}}),app.component("shTopBar",{bindings:{},templateUrl:"topbar/topbar.html",controller:function(){}}),app.component("shApp",{bindings:{},templateUrl:"app/app.html",controller:["$translate","$state",function(t,n){t.use(n.params.lang)}]}),app.component("shArticles",{bindings:{},templateUrl:"articles/articles.html",controller:["$stateParams",function(t){}]}),app.component("shMain",{bindings:{},templateUrl:"main/main.html",controller:function(){}}),app.component("shFb",{bindings:{},templateUrl:"about/fb/fb.html",controller:function(){this.select=function(t){this.selected==t?this.selected=0:this.selected=t}.bind(this)}}),app.component("shGoal",{bindings:{},templateUrl:"about/goal/goal.html",controller:function(){}}),app.component("shSources",{bindings:{},templateUrl:"about/sources/sources.html",controller:function(){}}),app.component("shWho",{bindings:{},templateUrl:"about/who/who.html",controller:function(){}}),app.component("shContact",{bindings:{},templateUrl:"footer/contact/contact.html",controller:function(){}}),app.component("shCopy",{bindings:{},templateUrl:"footer/copy/copy.html",controller:function(){}}),app.component("shForm",{bindings:{},templateUrl:"footer/form/form.html",controller:["$http","ngNotify","$translate",function(n,e,o){this.send=function(t){t&&t.email&&t.name&&t.message?n.post("./contact.php","name="+encodeURIComponent(t.name)+"&message="+encodeURIComponent(t.message)+"&email="+encodeURIComponent(t.email),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){t?e.set(o.instant("mail-success")):e.set(o.instant("mail-error"))}):e.set(o.instant("mail-missing"))},this.form={}}]}),app.component("shMap",{bindings:{},templateUrl:"footer/map/map.html",controller:function(){}}),app.component("shShare",{bindings:{},templateUrl:"footer/share/share.html",controller:function(){}}),app.component("shLinks",{bindings:{},templateUrl:"footer/links/links.html",controller:function(){}});
//# sourceMappingURL=app.js.map
